# Imperishable Gate

<div align="center">

![Go Version](https://img.shields.io/badge/Go-1.25.1+-00ADD8?style=flat&logo=go)
![License](https://img.shields.io/badge/License-MIT-green.svg)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-Database-336791?style=flat&logo=postgresql)
![Echo](https://img.shields.io/badge/Echo-Web_Framework-00C7B7?style=flat)
![Cobra](https://img.shields.io/badge/Cobra-CLI_Framework-blue?style=flat)

</div>

**Imperishable Gateï¼ˆä¸æœ½ä¹‹é—¨ï¼‰** æ˜¯ä¸€ä¸ªå—ä¸œæ–¹ Project å¯å‘çš„ç°ä»£åŒ–å‘½ä»¤è¡Œé“¾æ¥ç®¡ç†ç³»ç»Ÿã€‚å®ƒæä¾›äº†å®Œæ•´çš„é“¾æ¥ç”Ÿå‘½å‘¨æœŸç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢ã€æ ‡ç­¾åˆ†ç±»ã€åˆ«åç®¡ç†ã€å¤‡æ³¨ã€å…ƒæ•°æ®è‡ªåŠ¨æŠ“å–å’Œæ™ºèƒ½é“¾æ¥ç›‘æ§ç­‰åŠŸèƒ½ã€‚

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®é‡‡ç”¨**å‰åç«¯åˆ†ç¦»æ¶æ„**ï¼š
- **åç«¯æœåŠ¡**ï¼šåŸºäº Go + Echo + PostgreSQL + GORM æ„å»ºçš„é«˜æ€§èƒ½ RESTful API æœåŠ¡
- **CLI å®¢æˆ·ç«¯**ï¼šåŸºäº Cobra æ¡†æ¶çš„å¼ºå¤§å‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒè·¨å¹³å°ä½¿ç”¨

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” ä¼ä¸šçº§(?)å®‰å…¨è®¤è¯ç³»ç»Ÿ
- **åŒä»¤ç‰Œæœºåˆ¶**ï¼šJWT Access Tokenï¼ˆçŸ­æœŸï¼‰ + Refresh Tokenï¼ˆé•¿æœŸï¼‰
- **å¯†ç åŠ å¯†**ï¼šé‡‡ç”¨ bcrypt ç®—æ³•å®‰å…¨å­˜å‚¨ç”¨æˆ·å¯†ç 
- **å®‰å…¨å­˜å‚¨**ï¼šä»¤ç‰Œå­˜å‚¨åœ¨ç³»ç»Ÿ keyringï¼ˆæ”¯æŒ Linux/macOS/Windowsï¼‰
- **è‡ªåŠ¨åˆ·æ–°**ï¼šä»¤ç‰Œè¿‡æœŸè‡ªåŠ¨åˆ·æ–°ï¼Œæä¾›æ— æ„ŸçŸ¥çš„ç”¨æˆ·ä½“éªŒ
- **æ•°æ®éš”ç¦»**ï¼šå®Œå–„çš„ç”¨æˆ·æƒé™ç®¡ç†ï¼Œæ•°æ®å®Œå…¨éš”ç¦»

### ğŸ”— å¼ºå¤§(?)çš„é“¾æ¥ç®¡ç†åŠŸèƒ½
- **å¤šç»´åº¦æ£€ç´¢**ï¼šæ”¯æŒé€šè¿‡ URLã€æ ‡ç­¾ã€åˆ«åè¿›è¡Œå¿«é€ŸæŸ¥è¯¢
- **æ‰¹é‡æ“ä½œ**ï¼šä¸€æ¬¡æ€§æ·»åŠ æˆ–åˆ é™¤å¤šä¸ªé“¾æ¥ã€æ ‡ç­¾ã€åˆ«å
- **æ™ºèƒ½æŠ“å–**ï¼šè‡ªåŠ¨è·å–ç½‘é¡µå…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€æè¿°ã€å…³é”®è¯ï¼‰
- **çŠ¶æ€è¿½è¸ª**ï¼šå®æ—¶è®°å½• HTTP çŠ¶æ€ç ï¼Œç›‘æ§é“¾æ¥å¥åº·çŠ¶å†µ
- **å…³è”ç®¡ç†**ï¼šé“¾æ¥ã€æ ‡ç­¾ã€åˆ«åä¹‹é—´çš„çµæ´»å…³è”

### ğŸ·ï¸ çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿ(å¯èƒ½ä¼šæŠ¥é”™å°±æ˜¯äº†)
- **å¤šå¯¹å¤šå…³è”**ï¼šä¸€ä¸ªé“¾æ¥å¯ä»¥æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œä¸€ä¸ªæ ‡ç­¾å¯ä»¥å…³è”å¤šä¸ªé“¾æ¥
- **æ ‡ç­¾åˆ†ç±»**ï¼šæŒ‰æ ‡ç­¾åˆ†ç±»ç®¡ç†å’Œæ£€ç´¢é“¾æ¥
- **æ‰¹é‡æ ‡ç­¾æ“ä½œ**ï¼šæ”¯æŒé€šè¿‡ URL æˆ–åˆ«åæ‰¹é‡æ·»åŠ /åˆ é™¤æ ‡ç­¾
- **ç”¨æˆ·éš”ç¦»**ï¼šæ ‡ç­¾åœ¨ç”¨æˆ·èŒƒå›´å†…å”¯ä¸€ï¼Œäº’ä¸å¹²æ‰°

### ğŸ“ åˆ«åä¸å¤‡æ³¨ç®¡ç†
- **è‡ªå®šä¹‰åˆ«å**ï¼šä¸ºé“¾æ¥è®¾ç½®æ˜“è®°çš„è‡ªå®šä¹‰åˆ«åï¼ˆå…¨å±€å”¯ä¸€ï¼‰
- **å¿«é€Ÿå®šä½**ï¼šé€šè¿‡åˆ«åå¿«é€ŸæŸ¥æ‰¾å’Œæ“ä½œé“¾æ¥
- **è¯¦ç»†å¤‡æ³¨**ï¼šæ”¯æŒä¸ºæ¯ä¸ªé“¾æ¥æ·»åŠ è¯¦ç»†çš„å¤‡æ³¨ä¿¡æ¯
- **çµæ´»æ“ä½œ**ï¼šå¯é€šè¿‡åˆ«åæˆ– URL æ‰§è¡Œå„ç§æ“ä½œ

### ğŸ‘€ æ™ºèƒ½ç›‘æ§ç³»ç»Ÿï¼ˆå¹¶éæ™ºèƒ½ï¼‰
- **å®šæ—¶ç›‘æ§**ï¼šåå°å®šæ—¶æ£€æŸ¥é“¾æ¥çŠ¶æ€å’Œå†…å®¹å˜åŒ–
- **è‡ªåŠ¨æ£€æµ‹**ï¼šè‡ªåŠ¨å‘ç°ç½‘é¡µå†…å®¹æ›´æ–°
- **åˆ†çº§ç›‘æ§**ï¼šæ”¯æŒ watchingï¼ˆé«˜é¢‘ï¼‰å’Œ non-watchingï¼ˆä½é¢‘ï¼‰ä¸¤ç§ç›‘æ§æ¨¡å¼
- **å˜åŒ–é€šçŸ¥**ï¼šå†…å®¹å˜åŒ–æ—¶è‡ªåŠ¨é€šçŸ¥ï¼ˆæ”¯æŒé‚®ä»¶ç­‰å¤šç§æ–¹å¼ï¼‰
- **çŠ¶æ€ç®¡ç†**ï¼šçµæ´»è®¾ç½®é“¾æ¥çš„ç›‘æ§çŠ¶æ€

### ï¿½ ä¾¿æ·çš„ CLI ä½“éªŒï¼ˆCLIå¯¹è®¸å¤šäººæ¥è¯´çœŸçš„ä¾¿æ·å—ï¼‰
- **äº¤äº’å¼ç•Œé¢**ï¼šå‹å¥½çš„å‘½ä»¤è¡Œäº¤äº’ï¼Œç®€å•æ˜“ç”¨
- **æ™ºèƒ½æç¤º**ï¼šæ¸…æ™°çš„é”™è¯¯æç¤ºå’Œæ“ä½œæŒ‡å¼•
- **è‡ªåŠ¨è®¤è¯**ï¼šæ™ºèƒ½ä»¤ç‰Œç®¡ç†ï¼Œæ— éœ€é¢‘ç¹ç™»å½•
- **è·¨å¹³å°æ”¯æŒ**ï¼šæ”¯æŒ Linuxã€macOSã€Windows ç³»ç»Ÿ
- **ä¸°å¯Œå‘½ä»¤**ï¼šæä¾›å®Œæ•´çš„ CRUD æ“ä½œå‘½ä»¤é›†

## ğŸ“‹ ç›®å½•

- [ğŸ—ï¸ æ¶æ„è®¾è®¡](#ğŸ—ï¸-æ¶æ„è®¾è®¡)
- [ğŸ“‚ ç›®å½•ç»“æ„](#ğŸ“‚-ç›®å½•ç»“æ„)
- [ğŸ”§ ç¯å¢ƒè¦æ±‚](#ğŸ”§-ç¯å¢ƒè¦æ±‚)
- [âš™ï¸ é…ç½®è¯´æ˜](#âš™ï¸-é…ç½®è¯´æ˜)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#ğŸš€-å¿«é€Ÿå¼€å§‹)
- [ğŸ“‹ HTTP API](#ğŸ“‹-http-api)
- [ğŸ“Š æ•°æ®æ¨¡å‹](#ğŸ“Š-æ•°æ®æ¨¡å‹)
- [ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§](#ğŸ› ï¸-æŠ€æœ¯ç‰¹æ€§)
- [ğŸ”’ å®‰å…¨ç‰¹æ€§](#ğŸ”’-å®‰å…¨ç‰¹æ€§)
- [ğŸ“… å¼€å‘è¿›åº¦](#ğŸ“…-å¼€å‘è¿›åº¦)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#ğŸ¤-è´¡çŒ®æŒ‡å—)
- [ğŸ“„ è®¸å¯è¯](#ğŸ“„-è®¸å¯è¯)

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CLI Client (gate)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Commands   â”‚  â”‚   Services   â”‚  â”‚  System Keyring  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                  â”‚                    â”‚            â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                            â”‚                                 â”‚
â”‚                       HTTP/JSON                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       RESTful API                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Echo Web Framework                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  Routes  â”‚â†’ â”‚ Middleware â”‚â†’ â”‚    Handlers     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                          â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Services                â”‚             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚    JWT     â”‚  â”‚ Metadata â”‚  â”‚   Link Monitor   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Service   â”‚  â”‚  Crawler â”‚  â”‚  (Goroutines)    â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                               â”‚
â”‚                         GORM ORM                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PostgreSQL                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  users   â”‚  â”‚  links   â”‚  â”‚   tags   â”‚  â”‚  names   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   refresh_tokens     â”‚  â”‚     link_tags        â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ ç›®å½•ç»“æ„

```
cmd/
  gate/             # CLI å®¢æˆ·ç«¯å…¥å£
  gate-server/      # æœåŠ¡ç«¯å…¥å£
internal/
  client/           # å®¢æˆ·ç«¯å®ç°
    cmd/            # CLI å‘½ä»¤å®šä¹‰
    service/        # å®¢æˆ·ç«¯ä¸šåŠ¡é€»è¾‘
    utils/          # å®¢æˆ·ç«¯å·¥å…·å‡½æ•°
  model/            # æ•°æ®æ¨¡å‹ä¸å®ä½“
  server/           # æœåŠ¡ç«¯æ ¸å¿ƒé€»è¾‘
    database/       # æ•°æ®åº“åˆå§‹åŒ–ä¸è¿ç§»
    handlers/       # HTTP è¯·æ±‚å¤„ç†
    middlewares/    # ä¸­é—´ä»¶ï¼ˆJWT è®¤è¯ç­‰ï¼‰
    routes/         # è·¯ç”±æ³¨å†Œ
    service/        # æœåŠ¡ç«¯ä¸šåŠ¡é€»è¾‘
    utils/          # æœåŠ¡ç«¯å·¥å…·å‡½æ•°
  types/            # ç±»å‹å®šä¹‰
    request/        # è¯·æ±‚ç±»å‹
    response/       # å“åº”ç±»å‹
    jwt/            # JWT ç›¸å…³ç±»å‹
    data/           # æ•°æ®ç±»å‹
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- Go 1.25.1+
- PostgreSQL æ•°æ®åº“
- GORM + PostgreSQL é©±åŠ¨
- Echo Web æ¡†æ¶
- Cobra CLI æ¡†æ¶

### Linux ç³»ç»Ÿ Keyring è¦æ±‚

å®¢æˆ·ç«¯ä½¿ç”¨ç³»ç»Ÿ keyring å®‰å…¨å­˜å‚¨ä»¤ç‰Œã€‚åœ¨ Linux ç³»ç»Ÿä¸Šï¼Œéœ€è¦å®‰è£…ç›¸åº”çš„ keyring æœåŠ¡ï¼š

#### Ubuntu/Debian
```sh
sudo apt-get update
sudo apt-get install gnome-keyring libsecret-1-dev
```

#### Fedora/RHEL/CentOS
```sh
sudo dnf install gnome-keyring libsecret-devel
```

#### Arch Linux
```sh
sudo pacman -S gnome-keyring libsecret
```

> **æ³¨æ„**ï¼š
> - å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯æ¡Œé¢ç¯å¢ƒï¼ˆå¦‚ GNOMEã€KDEï¼‰ï¼Œé€šå¸¸å·²ç»é¢„è£…äº† keyring æœåŠ¡
> - å¯¹äºæ— å›¾å½¢ç•Œé¢çš„æœåŠ¡å™¨ç¯å¢ƒï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨å¯åŠ¨ keyring å®ˆæŠ¤è¿›ç¨‹
> - macOS å’Œ Windows ç³»ç»Ÿæ— éœ€é¢å¤–å®‰è£…ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿçš„ Keychain å’Œ Credential Manager

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

é¡¹ç›®ä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†é…ç½®ã€‚è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤é…ç½®ï¼š

1. **å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿æ–‡ä»¶**
   ```sh
   cp .env.example cmd/gate-server/.env
   ```

2. **ç¼–è¾‘é…ç½®æ–‡ä»¶**
   ```sh
   vim cmd/gate-server/.env
   ```

### é…ç½®é¡¹è¯´æ˜

#### ğŸ“Š æ•°æ®åº“é…ç½®

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ | å¿…éœ€ |
|---------|------|--------|------|
| `DSN` | PostgreSQL æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸² | `host=localhost user=postgres password=postgres dbname=gate_db port=5432 sslmode=disable TimeZone=Asia/Shanghai` | âœ… |

#### ğŸŒ æœåŠ¡å™¨é…ç½®

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ | å¿…éœ€ |
|---------|------|--------|------|
| `SERVER_ADDR` | æœåŠ¡å™¨ç›‘å¬åœ°å€ | `localhost:8080` æˆ– `:8080` | âœ… |

#### ğŸ” JWT å®‰å…¨é…ç½®

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ | å¿…éœ€ |
|---------|------|--------|------|
| `JWT_SECRET` | JWT ç­¾åå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹ï¼ï¼‰ | ä½¿ç”¨ `openssl rand -base64 64` ç”Ÿæˆ | âš ï¸ æ¨è |

> **å®‰å…¨æç¤º**ï¼š
> - ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…è®¾ç½®å¼ºéšæœº `JWT_SECRET`
> - ä½¿ç”¨å‘½ä»¤ç”Ÿæˆå®‰å…¨å¯†é’¥ï¼š`openssl rand -base64 64`
> - åˆ‡å‹¿å°†åŒ…å«çœŸå®å¯†é’¥çš„ `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ

#### ğŸ“§ é‚®ä»¶æœåŠ¡é…ç½®ï¼ˆå¯é€‰ï¼‰

ç”¨äºé“¾æ¥ç›‘æ§å˜åŒ–é€šçŸ¥åŠŸèƒ½ï¼š

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | ç¤ºä¾‹å€¼ | å¿…éœ€ |
|---------|------|--------|------|
| `EMAIL_HOST` | SMTP æœåŠ¡å™¨åœ°å€ | `smtp.gmail.com` | ğŸ“§ |
| `EMAIL_PORT` | SMTP æœåŠ¡å™¨ç«¯å£ | `587` (TLS) æˆ– `465` (SSL) | ğŸ“§ |
| `EMAIL_FROM` | å‘ä»¶äººé‚®ç®±åœ°å€ | `noreply@example.com` | ğŸ“§ |
| `EMAIL_PASSWORD` | é‚®ç®±å¯†ç æˆ–æˆæƒç  | `your-app-password` | ğŸ“§ |

> **é‚®ç®±é…ç½®æç¤º**ï¼š
> - Gmailï¼šä½¿ç”¨åº”ç”¨ä¸“ç”¨å¯†ç ï¼ˆ[è·å–æ–¹æ³•](https://support.google.com/accounts/answer/185833)ï¼‰
> - 163/QQé‚®ç®±ï¼šä½¿ç”¨æˆæƒç è€Œéç™»å½•å¯†ç 
> - ç«¯å£é€‰æ‹©ï¼š587ï¼ˆSTARTTLSï¼‰æˆ– 465ï¼ˆSSL/TLSï¼‰

### é…ç½®æ–‡ä»¶ä½ç½®

```
cmd/gate-server/.env    # æœåŠ¡ç«¯é…ç½®æ–‡ä»¶ï¼ˆéœ€æ‰‹åŠ¨åˆ›å»ºï¼‰
.env.example            # é…ç½®æ¨¡æ¿æ–‡ä»¶ï¼ˆä¸å«æ•æ„Ÿä¿¡æ¯ï¼‰
```

### é…ç½®ä¼˜å…ˆçº§

1. å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. ç¯å¢ƒå˜é‡ï¼ˆ`.env` æ–‡ä»¶ï¼‰
3. é»˜è®¤å€¼ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰

**ç¤ºä¾‹**ï¼š
```sh
# æ–¹å¼ 1: ä½¿ç”¨ .env æ–‡ä»¶é…ç½®
./bin/gate-server start

# æ–¹å¼ 2: ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°è¦†ç›–é…ç½®
./bin/gate-server start --addr ":9090" --dsn "host=localhost..."

# æ–¹å¼ 3: ä½¿ç”¨ç¯å¢ƒå˜é‡
export DSN="host=localhost..."
./bin/gate-server start
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è·å–é¡¹ç›®

```sh
git clone https://github.com/sokx6/imperishable-gate.git
cd imperishable-gate
```

### 2. å®‰è£…ä¾èµ–

```sh
go mod download
```

### 3. é…ç½®æ•°æ®åº“

åˆ›å»º PostgreSQL æ•°æ®åº“ï¼š

```sh
# ä½¿ç”¨ psql åˆ›å»ºæ•°æ®åº“
createdb gate_db

# æˆ–ä½¿ç”¨ SQL å‘½ä»¤
psql -U postgres -c "CREATE DATABASE gate_db;"
```

### 4. é…ç½®ç¯å¢ƒå˜é‡

```sh
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example cmd/gate-server/.env

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
vim cmd/gate-server/.env
```

**å¿…éœ€é…ç½®é¡¹**ï¼š
- `DSN`ï¼šæ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
- `SERVER_ADDR`ï¼šæœåŠ¡å™¨ç›‘å¬åœ°å€

**æ¨èé…ç½®é¡¹**ï¼š
- `JWT_SECRET`ï¼šè‡ªå®šä¹‰ JWT å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…éœ€ï¼‰

### 5. æ„å»ºäºŒè¿›åˆ¶

```sh
# æ„å»ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯
go build -o bin/gate-server ./cmd/gate-server
go build -o bin/gate ./cmd/gate

# æˆ–ä½¿ç”¨ç®€åŒ–å‘½ä»¤
make build  # å¦‚æœé¡¹ç›®æä¾›äº† Makefile
```

### 6. å¯åŠ¨æœåŠ¡ç«¯

```sh
# ä½¿ç”¨ .env æ–‡ä»¶é…ç½®å¯åŠ¨
cd cmd/gate-server
../../bin/gate-server start

# æˆ–ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°å¯åŠ¨
./bin/gate-server start --addr ":8080" --dsn "host=localhost user=postgres password=postgres dbname=gate_db port=5432 sslmode=disable"
```

æœåŠ¡ç«¯æˆåŠŸå¯åŠ¨åï¼Œä¼šæ˜¾ç¤ºï¼š
```
Starting Imperishable Gate server on :8080...
```

### 7. ä½¿ç”¨å®¢æˆ·ç«¯

#### ç”¨æˆ·è®¤è¯

- **æ³¨å†Œç”¨æˆ·**
  ```sh
  ./bin/gate register
  ```

- **ç™»å½•**
  ```sh
  ./bin/gate login
  ```

#### é“¾æ¥ç®¡ç†

- **æ·»åŠ é“¾æ¥**
  ```sh
  ./bin/gate add -l "https://example.com"
  # æ·»åŠ é“¾æ¥å¹¶è®¾ç½®å¤‡æ³¨
  ./bin/gate add -l "https://example.com" -r "æˆ‘çš„ç¤ºä¾‹ç½‘ç«™"
  ```

- **åˆ—å‡ºæ‰€æœ‰é“¾æ¥**
  ```sh
  ./bin/gate list
  ```

- **é€šè¿‡åç§°æŸ¥è¯¢é“¾æ¥**
  ```sh
  ./bin/gate list -n "mylink"
  ```

- **é€šè¿‡æ ‡ç­¾æŸ¥è¯¢é“¾æ¥**
  ```sh
  ./bin/gate list -t "tech"
  ```

- **åˆ é™¤é“¾æ¥**
  ```sh
  ./bin/gate delete -l "https://example.com"
  # é€šè¿‡åç§°åˆ é™¤
  ./bin/gate delete -n "mylink"
  ```

#### æ ‡ç­¾å’Œåç§°ç®¡ç†

- **ä¸ºé“¾æ¥æ·»åŠ æ ‡ç­¾**
  ```sh
  # é€šè¿‡ URL æ·»åŠ 
  ./bin/gate add -l "https://example.com" -t "tech,news"
  # é€šè¿‡åç§°æ·»åŠ 
  ./bin/gate add -n "mylink" -t "tech,news"
  ```

- **ä¸ºé“¾æ¥æ·»åŠ åˆ«å**
  ```sh
  ./bin/gate add -l "https://example.com" -N "mylink"
  ```

- **ä¸ºé“¾æ¥æ·»åŠ å¤‡æ³¨**
  ```sh
  # é€šè¿‡ URL æ·»åŠ 
  ./bin/gate add -l "https://example.com" -r "è¿™æ˜¯ä¸€ä¸ªå¤‡æ³¨"
  # é€šè¿‡åç§°æ·»åŠ 
  ./bin/gate add -n "mylink" -r "è¿™æ˜¯ä¸€ä¸ªå¤‡æ³¨"
  ```

#### ç›‘æ§ç®¡ç†

- **è®¾ç½®é“¾æ¥ç›‘æ§**
  ```sh
  # é€šè¿‡ URL è®¾ç½®
  ./bin/gate watch -l "https://example.com" -w true
  # é€šè¿‡åç§°è®¾ç½®
  ./bin/gate watch -n "mylink" -w true
  ```

#### ç³»ç»Ÿæ£€æŸ¥

- **å¥åº·æ£€æŸ¥**
  ```sh
  ./bin/gate ping -m "hello"
  ```

## ğŸ“‹ HTTP API

### å…¬å…±è·¯ç”±ï¼ˆæ— éœ€è®¤è¯ï¼‰

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| ---- | ---- | ---- |
| POST | `/api/v1/register` | ç”¨æˆ·æ³¨å†Œ |
| POST | `/api/v1/login` | ç”¨æˆ·ç™»å½• |
| POST | `/api/v1/ping` | å¥åº·æ£€æŸ¥ |
| POST | `/api/v1/refresh` | åˆ·æ–°è®¿é—®ä»¤ç‰Œ |
| POST | `/api/v1/logout` | ç”¨æˆ·ç™»å‡º |

### å—ä¿æŠ¤è·¯ç”±ï¼ˆéœ€è¦ JWT è®¤è¯ï¼‰

#### é“¾æ¥æŸ¥è¯¢

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| ---- | ---- | ---- |
| GET | `/api/v1/links` | è·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰é“¾æ¥ |
| GET | `/api/v1/names/:name` | é€šè¿‡åç§°è·å–é“¾æ¥ |
| GET | `/api/v1/tags/:tag` | é€šè¿‡æ ‡ç­¾è·å–é“¾æ¥ |

#### é“¾æ¥æ·»åŠ 

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| ---- | ---- | ---- |
| POST | `/api/v1/links` | æ·»åŠ æ–°é“¾æ¥ |
| POST | `/api/v1/names` | ä¸ºé“¾æ¥æ·»åŠ åç§° |
| POST | `/api/v1/remarks` | é€šè¿‡ URL æ·»åŠ æˆ–æ›´æ–°å¤‡æ³¨ |
| POST | `/api/v1/name/:name/remark` | é€šè¿‡åç§°æ·»åŠ æˆ–æ›´æ–°å¤‡æ³¨ |
| POST | `/api/v1/tags` | é€šè¿‡ URL æ·»åŠ æ ‡ç­¾ |
| POST | `/api/v1/name/:name/tags` | é€šè¿‡åç§°æ·»åŠ æ ‡ç­¾ |

#### é“¾æ¥æ›´æ–°

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| ---- | ---- | ---- |
| PATCH | `/api/v1/links/watch` | é€šè¿‡ URL è®¾ç½®ç›‘æ§çŠ¶æ€ |
| PATCH | `/api/v1/name/watch` | é€šè¿‡åç§°è®¾ç½®ç›‘æ§çŠ¶æ€ |
| PATCH | `/api/v1/links/names/remove` | é€šè¿‡ URL ç§»é™¤åç§° |
| PATCH | `/api/v1/links/by-url/tags/remove` | é€šè¿‡ URL ç§»é™¤æ ‡ç­¾ |
| PATCH | `/api/v1/:name/tags/remove` | é€šè¿‡åç§°ç§»é™¤æ ‡ç­¾ |

#### é“¾æ¥åˆ é™¤

| æ–¹æ³• | è·¯å¾„ | æè¿° |
| ---- | ---- | ---- |
| DELETE | `/api/v1/links` | é€šè¿‡ URL æ‰¹é‡åˆ é™¤é“¾æ¥ |
| DELETE | `/api/v1/links/name/:name` | é€šè¿‡åç§°åˆ é™¤é“¾æ¥ |

## ğŸ“Š æ•°æ®æ¨¡å‹

### Userï¼ˆç”¨æˆ·ï¼‰
- IDï¼šä¸»é”®
- Usernameï¼šç”¨æˆ·åï¼ˆå”¯ä¸€ï¼‰
- Passwordï¼šå¯†ç ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
- Emailï¼šé‚®ç®±
- Linksï¼šå…³è”çš„é“¾æ¥åˆ—è¡¨
- Tagsï¼šå…³è”çš„æ ‡ç­¾åˆ—è¡¨

### Linkï¼ˆé“¾æ¥ï¼‰
- IDï¼šä¸»é”®
- UserIDï¼šæ‰€å±ç”¨æˆ· ID
- Urlï¼šé“¾æ¥åœ°å€ï¼ˆç”¨æˆ·å†…å”¯ä¸€ï¼‰
- Tagsï¼šå¤šå¯¹å¤šå…³è”çš„æ ‡ç­¾
- Namesï¼šä¸€å¯¹å¤šå…³è”çš„åˆ«å
- Remarkï¼šå¤‡æ³¨ä¿¡æ¯
- Titleï¼šç½‘é¡µæ ‡é¢˜ï¼ˆè‡ªåŠ¨æŠ“å–ï¼‰
- Descriptionï¼šç½‘é¡µæè¿°ï¼ˆè‡ªåŠ¨æŠ“å–ï¼‰
- Keywordsï¼šç½‘é¡µå…³é”®è¯ï¼ˆè‡ªåŠ¨æŠ“å–ï¼‰
- Watchingï¼šæ˜¯å¦ç›‘æ§
- StatusCodeï¼šHTTP çŠ¶æ€ç 

### Tagï¼ˆæ ‡ç­¾ï¼‰
- IDï¼šä¸»é”®
- UserIDï¼šæ‰€å±ç”¨æˆ· ID
- Nameï¼šæ ‡ç­¾åï¼ˆç”¨æˆ·å†…å”¯ä¸€ï¼‰
- Linksï¼šå¤šå¯¹å¤šå…³è”çš„é“¾æ¥

### Nameï¼ˆåˆ«åï¼‰
- IDï¼šä¸»é”®
- LinkIDï¼šæ‰€å±é“¾æ¥ ID
- Nameï¼šåˆ«åï¼ˆå…¨å±€å”¯ä¸€ï¼‰

## ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§

### åç«¯
- **Web æ¡†æ¶**ï¼šEcho v4 - é«˜æ€§èƒ½ Go Web æ¡†æ¶
- **ORM**ï¼šGORM - åŠŸèƒ½å¼ºå¤§çš„ Go ORM
- **æ•°æ®åº“**ï¼šPostgreSQL - å¯é çš„å…³ç³»å‹æ•°æ®åº“
- **è®¤è¯**ï¼šJWTï¼ˆgolang-jwt/jwt v5ï¼‰+ Refresh Token æœºåˆ¶
- **å¯†ç åŠ å¯†**ï¼šbcrypt åŠ å¯†å­˜å‚¨
- **ç½‘é¡µæŠ“å–**ï¼šgoquery - è‡ªåŠ¨è·å–ç½‘é¡µå…ƒæ•°æ®
- **å®šæ—¶ä»»åŠ¡**ï¼šæ”¯æŒç›‘æ§é“¾æ¥çš„å®šæ—¶æ£€æŸ¥

### å®¢æˆ·ç«¯
- **CLI æ¡†æ¶**ï¼šCobra - å¼ºå¤§çš„ CLI åº”ç”¨æ„å»ºå·¥å…·
- **å‡­è¯å­˜å‚¨**ï¼šgo-keyring - ç³»ç»Ÿçº§å®‰å…¨å­˜å‚¨ï¼ˆæ”¯æŒ Linuxã€macOSã€Windowsï¼‰
- **è‡ªåŠ¨è®¤è¯**ï¼šæ™ºèƒ½ä»¤ç‰Œç®¡ç†ï¼Œè‡ªåŠ¨åˆ·æ–°è¿‡æœŸä»¤ç‰Œ
- **ç”¨æˆ·å‹å¥½**ï¼šäº¤äº’å¼è¾“å…¥ï¼Œæ¸…æ™°çš„é”™è¯¯æç¤º

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- ğŸ”’ å¯†ç ä½¿ç”¨ bcrypt åŠ å¯†å­˜å‚¨
- ğŸ« JWT è®¿é—®ä»¤ç‰Œï¼ˆçŸ­æœŸæœ‰æ•ˆï¼‰+ Refresh Tokenï¼ˆé•¿æœŸæœ‰æ•ˆï¼‰åŒä»¤ç‰Œæœºåˆ¶
- ğŸ”‘ ä»¤ç‰Œå­˜å‚¨åœ¨ç³»ç»Ÿ keyringï¼Œä¸å­˜å‚¨åœ¨é…ç½®æ–‡ä»¶
- ğŸ›¡ï¸ æ‰€æœ‰ä¸šåŠ¡ API éƒ½éœ€è¦ JWT è®¤è¯
- ğŸ‘¤ ç”¨æˆ·æ•°æ®éš”ç¦»ï¼Œä»…èƒ½è®¿é—®è‡ªå·±çš„æ•°æ®

## ğŸ“… å¼€å‘è¿›åº¦

### å·²å®ŒæˆåŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ç™»å‡º
- âœ… JWT è®¤è¯ä¸­é—´ä»¶
- âœ… é“¾æ¥çš„å¢åˆ æ”¹æŸ¥
- âœ… æ ‡ç­¾ç®¡ç†ï¼ˆæ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢ï¼‰
- âœ… åˆ«åç®¡ç†ï¼ˆæ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢ï¼‰
- âœ… å¤‡æ³¨åŠŸèƒ½
- âœ… ç½‘é¡µå…ƒæ•°æ®è‡ªåŠ¨æŠ“å–
- âœ… é“¾æ¥ç›‘æ§çŠ¶æ€ç®¡ç†
- âœ… CLI å®¢æˆ·ç«¯åŸºç¡€åŠŸèƒ½
- âœ… è‡ªåŠ¨ä»¤ç‰Œåˆ·æ–°
- âœ… å®šæ—¶ä»»åŠ¡ï¼šç›‘æ§é“¾æ¥å˜åŒ–é€šçŸ¥

### å¾…å®ŒæˆåŠŸèƒ½
- â³ å“åº”æ ¼å¼ç»Ÿä¸€åŒ–
- â³ æ›´å®Œå–„çš„é”™è¯¯å¤„ç†
- â³ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- â³ é…ç½®æ–‡ä»¶æ”¯æŒ
- â³ Docker éƒ¨ç½²æ”¯æŒ
- â³ API æ–‡æ¡£ï¼ˆSwaggerï¼‰

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
